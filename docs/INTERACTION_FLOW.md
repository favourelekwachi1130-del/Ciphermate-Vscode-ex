# CipherMate Interaction Flow

## ğŸ¯ User Interaction Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    USER OPENS CIPHERMATE                    â”‚
â”‚              (Cmd+Shift+P â†’ "CipherMate")                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚      WELCOME SCREEN            â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚   CipherMate Logo        â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  Chat Input Box          â”‚  â”‚
        â”‚  â”‚  (with rotating hints)    â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  Quick Action Buttons    â”‚  â”‚
        â”‚  â”‚  [Scan] [Secrets] [etc] â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
        â”‚  â”‚  Configure AI Provider   â”‚  â”‚
        â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚
        â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  METHOD 1:    â”‚            â”‚   METHOD 2:      â”‚
â”‚  Click Button â”‚            â”‚   Type Command   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                             â”‚
        â”‚                             â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   MESSAGE SENT TO AI          â”‚
        â”‚   (via vscode.postMessage)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   REQUEST TYPE DETECTION      â”‚
        â”‚                               â”‚
        â”‚   Is it a scan request?       â”‚
        â”‚   â”œâ”€ YES â†’ AgenticCore        â”‚
        â”‚   â””â”€ NO  â†’ CyberAgent         â”‚
        â”‚                               â”‚
        â”‚   Mode detection:             â”‚
        â”‚   â”œâ”€ Smart contract?         â”‚
        â”‚   â”œâ”€ Web security?            â”‚
        â”‚   â””â”€ General?                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                               â”‚
        â–¼                               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SCAN REQUEST    â”‚        â”‚  CONVERSATIONAL      â”‚
â”‚                  â”‚        â”‚                      â”‚
â”‚  AgenticCore     â”‚        â”‚  CyberAgent          â”‚
â”‚  â”œâ”€ Uses tools   â”‚        â”‚  â”œâ”€ Mode switching   â”‚
â”‚  â”œâ”€ Runs scans   â”‚        â”‚  â”œâ”€ Natural language â”‚
â”‚  â””â”€ Returns data â”‚        â”‚  â””â”€ Educational      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                             â”‚
         â”‚                             â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   REPOSITORY SCANNER          â”‚
        â”‚   (if scan requested)         â”‚
        â”‚                               â”‚
        â”‚   Runs 4 scanners:            â”‚
        â”‚   â”œâ”€ Dependency Scanner       â”‚
        â”‚   â”œâ”€ Secrets Scanner         â”‚
        â”‚   â”œâ”€ Smart Contract Scanner   â”‚
        â”‚   â””â”€ Code Pattern Scanner     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   RESULTS AGGREGATED          â”‚
        â”‚   â”œâ”€ Vulnerabilities found    â”‚
        â”‚   â”œâ”€ Severity calculated      â”‚
        â”‚   â””â”€ Summary generated        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   RESPONSE DISPLAYED          â”‚
        â”‚                               â”‚
        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚   â”‚  Chat Message           â”‚ â”‚
        â”‚   â”‚  (User-friendly text)   â”‚ â”‚
        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                               â”‚
        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚   â”‚  Results Panel          â”‚ â”‚
        â”‚   â”‚  (Detailed findings)    â”‚ â”‚
        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚                               â”‚
        â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚   â”‚  Inline Diagnostics     â”‚ â”‚
        â”‚   â”‚  (Editor highlights)   â”‚ â”‚
        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Interaction Methods

### Method 1: Quick Action Buttons (Fastest)

```
User clicks button
    â†“
Button sends message via vscode.postMessage
    â†“
Extension receives message
    â†“
Processes request
    â†“
Returns results
```

**Example**:
- Click **"Scan Repository"** â†’ Full scan runs â†’ Results appear

---

### Method 2: Natural Language Chat (Most Flexible)

```
User types message
    â†“
Press Enter or click Send
    â†“
Message sent to extension
    â†“
AI analyzes intent
    â†“
Routes to appropriate handler
    â†“
Returns conversational response
```

**Example**:
- Type: `"scan my repository"` â†’ Scan runs â†’ Results + explanation

---

### Method 3: Command Palette (Power Users)

```
Cmd+Shift+P
    â†“
Type "CipherMate"
    â†“
Select command
    â†“
Action executes
    â†“
Results displayed
```

**Example**:
- `Cmd+Shift+P` â†’ `CipherMate: Intelligent Scan` â†’ Scan runs

---

## ğŸ’¬ Conversation Flow Examples

### Example 1: Simple Scan
```
User: [Clicks "Scan Repository"]
    â†“
System: "Scanning repository..."
    â†“
System: "Found 12 vulnerabilities (3 critical, 5 high)"
    â†“
User: "Show me the critical ones"
    â†“
System: [Lists critical vulnerabilities]
```

### Example 2: Educational Query
```
User: "What is SQL injection?"
    â†“
System: [Switches to conversational mode]
    â†“
System: "SQL injection is a code injection technique..."
    â†“
User: "How do I prevent it?"
    â†“
System: "To prevent SQL injection, use parameterized queries..."
```

### Example 3: Context-Aware
```
User: "Analyze my smart contract"
    â†“
System: [Detects "smart contract" keyword]
    â†“
System: [Switches to smartcontract mode]
    â†“
System: "Scanning Solidity files..."
    â†“
System: "Found reentrancy vulnerability in Withdraw.sol:42"
    â†“
User: "How do I fix it?"
    â†“
System: [Provides Solidity code fix with explanation]
```

---

## ğŸ¯ Decision Tree

```
User Action
    â”‚
    â”œâ”€ Click Button?
    â”‚   â””â”€ Yes â†’ Send button's data-action text
    â”‚
    â”œâ”€ Type Command?
    â”‚   â””â”€ Yes â†’ Send typed text
    â”‚
    â””â”€ Use Command Palette?
        â””â”€ Yes â†’ Execute command directly

    â†“

Message Received
    â”‚
    â”œâ”€ Contains "scan", "find", "check", "analyze"?
    â”‚   â””â”€ Yes â†’ Use AgenticCore (tool calling)
    â”‚
    â”œâ”€ Contains "smart contract", "solidity", "web3"?
    â”‚   â””â”€ Yes â†’ Switch to smartcontract mode
    â”‚
    â”œâ”€ Contains "web", "api", "http", "owasp"?
    â”‚   â””â”€ Yes â†’ Switch to webpentest mode
    â”‚
    â””â”€ Otherwise â†’ Use CyberAgent (conversational)

    â†“

Response Generated
    â”‚
    â”œâ”€ Scan Request?
    â”‚   â””â”€ Yes â†’ Run scanners â†’ Aggregate â†’ Display
    â”‚
    â””â”€ Conversational?
        â””â”€ Yes â†’ Generate response â†’ Display
```

---

## ğŸ“Š Results Display Flow

```
Scan Completes
    â†“
Results Aggregated
    â†“
    â”œâ”€ Display in Chat
    â”‚   â””â”€ User-friendly summary
    â”‚
    â”œâ”€ Update Results Panel
    â”‚   â””â”€ Detailed vulnerability cards
    â”‚
    â””â”€ Add Inline Diagnostics
        â””â”€ Editor highlights
```

---

## ğŸ¨ UI States

### State 1: Welcome Screen
- Logo visible
- Chat input with rotating placeholders
- Quick action buttons
- Settings card

### State 2: Chat Mode
- Welcome screen hidden
- Header visible ("CipherMate")
- Messages area visible
- Input area at bottom

### State 3: Results View
- Chat messages
- Results Panel open
- Inline diagnostics in editor

---

## ğŸ”„ Complete User Journey

```
1. User opens VS Code
   â†“
2. Opens workspace
   â†“
3. Presses Cmd+Shift+P
   â†“
4. Types "CipherMate"
   â†“
5. Welcome screen appears
   â†“
6. User clicks "Scan Repository"
   â†“
7. System switches to chat mode
   â†“
8. Shows "Scanning..." message
   â†“
9. Runs 4 scanners in parallel
   â†“
10. Aggregates results
   â†“
11. Displays summary in chat
   â†“
12. Updates Results Panel
   â†“
13. Adds inline diagnostics
   â†“
14. User clicks vulnerability
   â†“
15. Jumps to code location
   â†“
16. User asks: "How do I fix this?"
   â†“
17. AI provides fix suggestion
   â†“
18. User applies fix
   â†“
19. Re-scans to verify
   â†“
20. Issue resolved! âœ…
```

---

## ğŸ’¡ Key Interaction Points

1. **Entry Point**: Command Palette or Activity Bar
2. **Primary Interface**: Chat window
3. **Quick Actions**: 5 buttons for common tasks
4. **Results View**: Panel + Inline diagnostics
5. **Settings**: VS Code settings or Settings card

---

## ğŸ“ Learning Curve

### Beginner (Day 1)
- Use buttons only
- Click "Scan Repository"
- Read results

### Intermediate (Week 1)
- Type natural language commands
- Ask follow-up questions
- Use Results Panel

### Advanced (Month 1)
- Customize AI provider
- Configure scanners
- Integrate with workflows

---

**The system is designed to be intuitive - start with buttons, progress to natural language!** ğŸš€

